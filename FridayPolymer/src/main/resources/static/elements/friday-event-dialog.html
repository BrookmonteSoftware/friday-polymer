  <!-- Stylesheets -->
  <link  rel="stylesheet" href="../js/bower_components/x-editable/dist/jqueryui-editable/css/jqueryui-editable.css">
  
  <!-- Non-Polymer JS libraries -->  
  <script src="../js/bower_components/moment/moment.js" th:src="@{../js/bower_components/moment/moment.js}"></script>
  <script src="../js/bower_components/moment-duration-format/lib/moment-duration-format.js" th:src="@{../js/bower_components/moment-duration-format/lib/moment-duration-format.js}"></script>

  <script src="../js/bower_components/jquery-cycle2/build/jquery.cycle2.min.js" th:src="@{../js/bower_components/jquery-cycle2/build/jquery.cycle2.min.js}"></script>
  <script src="../js/bower_components/x-editable/dist/jqueryui-editable/js/jqueryui-editable.min.js" th:src="@{../js/bower_components/x-editable/dist/jqueryui-editable/js/jqueryui-editable.min.js}"></script>


  <!-- Friday application JS libraries -->
  
  <!-- POLYMER ELEMENTS -->
  <link rel="import" href="../js/bower_components/polymer/polymer.html">
  
  <!-- IRON -->
  <link rel="import" href="../js/bower_components/iron-resizable-behavior/iron-resizable-behavior.html" th:href="@{../js/bower_components/iron-resizable-behavior/iron-resizable-behavior.html}">
  
  <!-- PAPER -->
  
  <!-- GOOGLE -->

  <!-- FRIDAY ELEMENTS -->

<dom-module id="friday-event-dialog">

<template>
<style>
  .sectionLabelContainer
  {
    vertical-align: top;
  }
  
  .sectionLabel
  {
    color: #5B9BD5;
    font: normal normal 28px Calibri, sans-serif;
  }
  
  .itemLabelCell
  {
    width: 150px;
    min-width: 150px;
    max-width: 150px;    
  }
  
  .itemLabel
  {
    color: #5B9BD5;
    font: normal normal 16px Calibri, sans-serif;
  }
</style>
<div id="eventDialogContainer" style="position: relative; top: 0px; display:none; overflow:hidden">
  <table>
    <tbody>
      <tr>
        <td class="sectionLabelContainer"><span class="sectionLabel">What</span></td>
        <td>
          <table>
            <tbody>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Type</span>
                </td>
                <td>
                  <select id="eventTypeSelect">
                    <option value="MEETING">MEETING</option>
                    <option value="TASK">TASK</option>
                    <option value="APPOINTMENT">APPOINTMENT</option>
                    <option value="REMINDER">REMINDER</option>
                    <option value="BIRTHDAY">BIRTHDAY</option>
                    <option value="ANNIVERSARY">ANNIVERSARY</option>
                    <option value="PARTY">PARTY</option>
                    <option value="CONCERT">CONCERT</option>
                    <option value="MOVIE">MOVIE</option>
                    <option value="PLAY">PLAY</option>
                    <option value="OTHER">OTHER</option></select>
                </td>
              </tr>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Title</span>
                </td>
                <td>
                  <input type="text" />
                </td>
              </tr>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Description</span>
                </td>
                <td>
                  <textarea class="eventDescr" id="descrText" cols="60" rows="5" maxlength="2047"></textarea>
                </td>
              </tr> 
            </tbody>
          </table>
        </td>
      </tr>
      <tr>
        <td class="sectionLabelContainer"><span class="sectionLabel">Where</span></td>
        <td>
          <table>
            <tbody>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Location</span>
                </td>
                <td>
                  <input type="text" />
                </td>
              </tr>
            </tbody>
          </table>        
        </td>      
      </tr>
      <tr>
        <td class="sectionLabelContainer"><span class="sectionLabel">Who</span></td>
        <td>
          <table>
            <tbody>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Names or Email Addresses</span>
                </td>
                <td>
                  <input type="text" />
                </td>
              </tr>
            </tbody>
          </table>        
        </td>      
      </tr>
      <tr>
        <td class="sectionLabelContainer"><span class="sectionLabel">When</span></td>
        <td>
          <table>
            <tbody>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Start Date and Time</span>
                </td>                
                <td>
                  <a id="startDateAnchor" href="#" data-type="combodate" data-combodate="{minYear: 1900}" data-template="MMM-D-YYYY h:mmA" data-format="MMM-D-YYYY h:mmA"></a>
                </td>
              </tr>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">End Date and Time</span>
                </td>
                <td>
                  <a id="endDateAnchor" href="#" data-type="combodate" data-combodate="{minYear: 1900}" data-template="MMM-D-YYYY h:mmA" data-format="MMM-D-YYYY h:mmA"></a>
                </td>
              </tr>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Reminders</span>
                </td>                
                <td>
                  <input type="checkbox" id="atStartChk" name="atStartChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> At start time</span>
                  <input type="checkbox" id="_15MinBeforeChk" name="_15MinBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 15 min before</span>
                  <input type="checkbox" id="_30MinBeforeChk" name="_30MinBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 30 min before</span>
                  <input type="checkbox" id="_60MinBeforeChk" name="_60MinBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 1 hour before</span>
                </td>              
              </tr>
              <tr>
                <td></td>
                <td>
                  <input type="checkbox" id="_120MinBeforeChk" name="_120MinBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 2 hours before</span>
                  <input type="checkbox" id="_1DayBeforeChk" name="_1DayBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 1 day before</span>
                  <input type="checkbox" id="_1WeekBeforeChk" name="_1WeekBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 1 week before</span>
                  <input type="checkbox" id="_1MonthBeforeChk" name="_1MonthBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 1 month before</span>                
                </td>
              </tr>
            </tbody>
          </table>        
        </td>      
      </tr>
      <tr>
        <td class="sectionLabelContainer"><span class="sectionLabel">How Often</span></td>
        <td>
          <table>
            <tbody>
              <tr>
                <td>
                <td class="itemLabelCell">
                  <span class="itemLabel">Once</span>
                </td>
                <td style="text-align: left;">
                  <input type="radio" id="oneTimeRadio" name="repeatRadioGroup" class="eventInputEventTitleRadio" style="height: 12px; width: 12px; border: 0px; color: blue;">
                  <span id="oneTimeDateTimeSpan" class="eventInputEventTitleInput" style="margin-left: 10px;"></span>
                </td>
                
                </td>
              </tr>
            </tbody>
          </table>        
        </td>      
      </tr>
    </tbody>
  </table>
</div>


<iron-ajax id="eventajax" url="" handle-as="json" on-response="hresponse" debounce-duration="300">
</iron-ajax>
  
</template>

<script>
  var _this = null;  
  jQuery.fn.editable.defaults.mode = 'inline';
  
  Polymer(
  {
      is : 'friday-event-dialog',
      behaviors : [ Polymer.IronResizableBehavior ],
      getEvent : function()
      {                  
          this.$.eventajax.url = getBaseLocation();          
          
          this.$.eventajax.generateRequest();
      },
      hresponse : function(request)
      {
          eventResponse = this.$.newsajax.lastResponse;
          
          //alert(news);
          
          this.fire('event-changed',
          {
              eventChanged : true
          });
      },
      attached : function()
      {
          _this = this;
          
          this.async(this.notifyResize, 1);
      },
      ready: function()
      {
      },
      listeners :
      {
          'iron-resize'	 : '_onIronResize',
          'event-changed' : '_onEventChange'
      },
      properties :
      {
      },
      _onIronResize : function()
      {
          var infoCard = jQuery("#infoCard");
          var cardHeight = infoCard.height();
          var cardWidth = infoCard.width();

      },
      _onEventChange : function()
      {
          // after everything is received, parsed, and UI built,
          // new requests to get event data can be accepted
          gettingEvent = false;          
      },
      
      showEventDialog : function(startDate, endDate, allDay)
      {
          jQuery("#startDateAnchor").html(startDate.format("MMM-D-YYYY h:mmA"));
          jQuery("#endDateAnchor").html(endDate.format("MMM-D-YYYY h:mmA"));
          
          jQuery("#startDateAnchor").editable();
          jQuery("#endDateAnchor").editable();
          
          var eventDuration = moment.duration(endDate.diff(startDate));
          
          var durationMinutes = eventDuration.asMinutes();
          var durationString = "";
          
          if (durationMinutes > 119)
          {
              durationString = eventDuration.format("h [hours] m [minutes]");
          }
          else
          {
              durationString = eventDuration.format("h [hour] m [minutes]");
          }
          
          jQuery("#oneTimeDateTimeSpan").html("on "
                  + startDate.format("MMM-D-YYYY")
                  + " from "
                  + startDate.format("h:mmA")
                  + " to "
                  + endDate.format("h:mmA")
                  + " (" + durationString + ")");
          
          jQuery("#eventDialogContainer").dialog(
          {
              title : "Create/Edit Event",
              height : 800,
              width : 800,
              autoOpen : true,
              modal : true,
              resizable : false,
              draggable : true,
              buttons: [
                        {
                          text: "Submit",
                          click: function()
                          {
                            jQuery( this ).dialog( "close" );
                          }
                        },
                        {
                          text: "Cancel",
                          click: function()
                          {
                            jQuery( this ).dialog( "close" );
                          }
                        }                      
                       ]        
          });
      },
      timezone: false,
      updateEventDisplay : function()
      {        
      }      
  });
 

</script>
        
</dom-module>