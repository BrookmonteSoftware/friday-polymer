  <!-- Stylesheets -->
  <link  rel="stylesheet" href="../js/bower_components/x-editable/dist/jqueryui-editable/css/jqueryui-editable.css">
  
  <!-- Non-Polymer JS libraries -->  
  <script src="../js/bower_components/moment/moment.js" th:src="@{../js/bower_components/moment/moment.js}"></script>
  <script src="../js/bower_components/moment-duration-format/lib/moment-duration-format.js" th:src="@{../js/bower_components/moment-duration-format/lib/moment-duration-format.js}"></script>

  <script src="../js/bower_components/jquery-cycle2/build/jquery.cycle2.min.js" th:src="@{../js/bower_components/jquery-cycle2/build/jquery.cycle2.min.js}"></script>
  <script src="../js/bower_components/x-editable/dist/jqueryui-editable/js/jqueryui-editable.min.js" th:src="@{../js/bower_components/x-editable/dist/jqueryui-editable/js/jqueryui-editable.min.js}"></script>


  <!-- Friday application JS libraries -->
  
  <!-- POLYMER ELEMENTS -->
  <link rel="import" href="../js/bower_components/polymer/polymer.html">
  
  <!-- IRON -->
  <link rel="import" href="../js/bower_components/iron-resizable-behavior/iron-resizable-behavior.html" th:href="@{../js/bower_components/iron-resizable-behavior/iron-resizable-behavior.html}">
  
  <!-- PAPER -->
  
  <!-- GOOGLE -->

  <!-- FRIDAY ELEMENTS -->

<dom-module id="friday-event-dialog">

<template>
<style>
  .sectionLabelContainer
  {
    vertical-align: top;
  }
  
  .sectionLabel
  {
    color: #5B9BD5;
    font: normal normal 28px Calibri, sans-serif;
  }
  
  .itemLabelCell
  {
    width: 150px;
    min-width: 150px;
    max-width: 150px;    
  }
  
  .itemLabel
  {
    color: #5B9BD5;
    font: normal normal 16px Calibri, sans-serif;
  }
  
  .eventInputEventLocationLabel
  {
    font: bold normal 14px Calibri, sans-serif;
    color: #5B9BD5;
    margin-right: 10px;    
  }
  
  .eventInputStartDateLabel
  {
    font: bold normal 14px Calibri, sans-serif;
    color: #5B9BD5;
    margin-right: 10px;
    vertical-align: top;  
  }
  
  .eventInputEventTitle
  {
    font: normal normal 16px Calibri, sans-serif !important;  
    color: #5B9BD5 !important;  
  }
  
  .eventInputEventTitleInput
  {
    font: normal normal 14px Calibri, sans-serif !important;  
    color: #5B9BD5 !important;
    border: none;  
  }
  
  .eventInputEventTitleRadio
  {
    font: normal normal 14px Calibri, sans-serif !important;  
    color: #5B9BD5 !important;
    border: 0px;  
  }
  
  .eventInputEventDescrLabel
  {
    font: normal normal 16px Calibri, sans-serif;
    color: #5B9BD5;
    margin-right: 6px;
    vertical-align: top;  
  }
  
  .eventInputEventDescr
  {
    font: normal normal 14px Calibri, sans-serif !important;
    color: #5B9BD5 !important;
    resize: none;  
  }
  
  .monthTable
  {
    font: normal normal 14px Calibri, sans-serif;
    color: #5B9BD5;
    border: 1px solid #5B9BD5;
    border-collapse: collapse;
    margin-left: 30px;
  }
  
  .mtd
  {
    font: bold normal 14px Calibri, sans-serif;
    color: #5B9BD5;
    border: 1px solid #5B9BD5;
    padding: 2px;
    cursor: pointer;
    text-align: center;
  }
  
  .mtdSelected
  {
    font: bold normal 14px Calibri, sans-serif;
    color: #FFFFFF;
    background: #ED7D31;
    border: 1px solid #5B9BD5;
    padding: 2px;
    cursor: pointer;
    text-align: center;  
  }
  
  .mdtd
  {
    font: bold normal 14px Calibri, sans-serif;
    color: #5B9BD5;
    border: 1px solid #5B9BD5;
    padding: 2px;
    cursor: pointer;
    width: 25px;
    text-align: center;
  }
  
  .mdtdSelected
  {
    font: bold normal 14px Calibri, sans-serif;
    color: #FFFFFF;
    background: #ED7D31;
    border: 1px solid #5B9BD5;
    padding: 2px;
    cursor: pointer;
    text-align: center;  
  }
  
  .mtdLabel
  {
    font: bold italic 14px Calibri, sans-serif;
    color: #5B9BD5;
    border: 1px solid #5B9BD5;
    padding: 2px;
    cursor: pointer;
  }
  
</style>
<div id="eventDialogContainer" style="position: relative; top: 0px; display:none; overflow:hidden">
  <table>
    <tbody>
      <tr>
        <td class="sectionLabelContainer"><span class="sectionLabel">What</span></td>
        <td>
          <table>
            <tbody>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Type</span>
                </td>
                <td>
                  <select id="eventTypeSelect">
                    <option value="MEETING">MEETING</option>
                    <option value="TASK">TASK</option>
                    <option value="APPOINTMENT">APPOINTMENT</option>
                    <option value="REMINDER">REMINDER</option>
                    <option value="BIRTHDAY">BIRTHDAY</option>
                    <option value="ANNIVERSARY">ANNIVERSARY</option>
                    <option value="PARTY">PARTY</option>
                    <option value="CONCERT">CONCERT</option>
                    <option value="MOVIE">MOVIE</option>
                    <option value="PLAY">PLAY</option>
                    <option value="OTHER">OTHER</option>
                  </select>
                </td>
              </tr>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Title</span>
                </td>
                <td>
                  <input type="text" />
                </td>
              </tr>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Description</span>
                </td>
                <td>
                  <textarea class="eventDescr" id="descrText" cols="60" rows="5" maxlength="2047"></textarea>
                </td>
              </tr> 
            </tbody>
          </table>
        </td>
      </tr>
      <tr>
        <td class="sectionLabelContainer"><span class="sectionLabel">Where</span></td>
        <td>
          <table>
            <tbody>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Location</span>
                </td>
                <td>
                  <input type="text" />
                </td>
              </tr>
            </tbody>
          </table>        
        </td>      
      </tr>
      <tr>
        <td class="sectionLabelContainer"><span class="sectionLabel">Who</span></td>
        <td>
          <table>
            <tbody>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Names or Email Addresses</span>
                </td>
                <td>
                  <input type="text" />
                </td>
              </tr>
            </tbody>
          </table>        
        </td>      
      </tr>
      <tr>
        <td class="sectionLabelContainer"><span class="sectionLabel">When</span></td>
        <td>
          <table>
            <tbody>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Start Date and Time</span>
                </td>                
                <td>
                  <a id="startDateAnchor" href="#" data-type="combodate" data-combodate="{minYear: 1900}" data-template="MMM-D-YYYY h:mmA" data-format="MMM-D-YYYY h:mmA"></a>
                </td>
              </tr>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">End Date and Time</span>
                </td>
                <td>
                  <a id="endDateAnchor" href="#" data-type="combodate" data-combodate="{minYear: 1900}" data-template="MMM-D-YYYY h:mmA" data-format="MMM-D-YYYY h:mmA"></a>
                </td>
              </tr>
              <tr>
                <td class="itemLabelCell">
                  <span class="itemLabel">Reminders</span>
                </td>                
                <td>
                  <input type="checkbox" id="atStartChk" name="atStartChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> At start time</span>
                  <input type="checkbox" id="_15MinBeforeChk" name="_15MinBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 15 min before</span>
                  <input type="checkbox" id="_30MinBeforeChk" name="_30MinBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 30 min before</span>
                  <input type="checkbox" id="_60MinBeforeChk" name="_60MinBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 1 hour before</span>
                </td>              
              </tr>
              <tr>
                <td></td>
                <td>
                  <input type="checkbox" id="_120MinBeforeChk" name="_120MinBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 2 hours before</span>
                  <input type="checkbox" id="_1DayBeforeChk" name="_1DayBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 1 day before</span>
                  <input type="checkbox" id="_1WeekBeforeChk" name="_1WeekBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 1 week before</span>
                  <input type="checkbox" id="_1MonthBeforeChk" name="_1MonthBeforeChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; border: 0px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> 1 month before</span>                
                </td>
              </tr>
            </tbody>
          </table>        
        </td>      
      </tr>
      <tr>
        <td class="sectionLabelContainer"><span class="sectionLabel">How Often</span></td>
        <td>
          <table>
            <tbody>
              <tr>
                <td>
                <td class="itemLabelCell">
                  <span class="itemLabel">Once</span>
                </td>
                <td style="text-align: left;">
                  <input type="radio" id="oneTimeRadio" name="repeatRadioGroup" class="eventInputEventTitleRadio" style="height: 12px; width: 12px; border: 0px; color: blue;">
                  <span id="oneTimeDateTimeSpan" class="eventInputEventTitleInput" style="margin-left: 10px;"></span>
                </td>
              </tr>
              <tr>
                <td>
                <td class="itemLabelCell">
                  <span class="itemLabel">Repeating</span>
                </td>
                <td style="text-align: left;">
                  <input type="radio" id="repeatDailyRadio" name="repeatRadioGroup" class="eventInputEventTitleRadio" style="height: 12px; width: 12px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;">Every</span>
                  <input type="text" id="taskDayCountInput" class="eventInputEventTitleInput" size="2" value="1" disabled="disabled">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;">  day(s)</span>
                </td>
              </tr>
              <tr>
                <td>
                <td class="itemLabelCell">
                  <span class="itemLabel">&nbsp;</span>
                </td>
                <td style="text-align: left;">
                  <input type="radio" id="repeatWeeklyRadio" name="repeatRadioGroup" class="eventInputEventTitleRadio" style="height: 12px; width: 12px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;">Every</span>
                  <input type="text" id="taskDayCountInput" class="eventInputEventTitleInput" size="2" value="1" disabled="disabled">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;">  week(s) on:</span>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="eventInputSectionLabel">&nbsp;</span>
                </td>
                <td style="text-align: left;">
                  <span>&nbsp;</span>
                </td>
                <td style="text-align: left;">
                  <input type="checkbox" id="sundayChk" name="sundayChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px; margin-left: 30px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> Sun</span>
                  <input type="checkbox" id="mondayChk" name="mondayChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> Mon</span>
                  <input type="checkbox" id="tuesdayChk" name="tuesdayChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> Tue</span>
                  <input type="checkbox" id="wednesdayChk" name="wednesdayChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> Wed</span>
                  <input type="checkbox" id="thursdayChk" name="thursdayChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> Thu</span>
                  <input type="checkbox" id="fridayChk" name="fridayChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> Fri</span>
                  <input type="checkbox" id="saturdayChk" name="saturdayChk" class="eventInputEventTitleInput" style="height: 12px; width: 12px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;"> Sat</span>
                </td>
              </tr>
              <tr>
                <td>
                <td class="itemLabelCell">
                  <span class="itemLabel">&nbsp;</span>
                </td>
                <td style="text-align: left;">
                  <input type="radio" id="repeatMonthlyRadio" name="repeatRadioGroup" class="eventInputEventTitleRadio" style="height: 12px; width: 12px;">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;">Every</span>
                  <input type="text" id="taskDayCountInput" class="eventInputEventTitleInput" size="2" value="1" disabled="disabled">
                  <span class="eventInputEventLocationLabel" style="vertical-align: middle; position: relative; top: -5px;">  month(s) on these days of the month:</span>
                </td>
              </tr>
              
              <tr>
                <td>
                  <span class="eventInputSectionLabel">&nbsp;</span>
                </td>
                <td style="text-align: left;">
                  <span>&nbsp;</span>
                </td>
                <td style="text-align: left;">
                  <div id="monthTableDiv" style="display: block;">
                    <table>
                      <tbody>
                        <tr>
                          <td>
                            <table id="monthTable" class="monthTable">
                              <tbody id="monthTableBody">
                                <tr>
                                  <td class="mtd">1</td><td class="mtd">2</td><td class="mtd">3</td><td class="mtd">4</td><td class="mtd">5</td><td class="mtd">6</td><td class="mtd">7</td>
                                </tr>
                                <tr>
                                  <td class="mtd">8</td><td class="mtd">9</td><td class="mtd">10</td><td class="mtd">11</td><td class="mtd">12</td><td class="mtd">13</td><td class="mtd">14</td>
                                </tr>
                                <tr>
                                  <td class="mtd">15</td><td class="mtd">16</td><td class="mtd">17</td><td class="mtd">18</td><td class="mtd">19</td><td class="mtd">20</td><td class="mtd">21</td>
                                </tr>
                                <tr>
                                  <td class="mtd">22</td><td class="mtd">23</td><td class="mtd">24</td><td class="mtd">25</td><td class="mtd">26</td><td class="mtd">27</td><td class="mtd">28</td>
                                </tr>
                                <tr>
                                  <td class="mtd">29</td><td class="mtd">30</td><td class="mtd">31</td><td colspan="4" class="mtd">Last Day</td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                          <td>
                            <table class="monthTable" id="monthDayTable">
                              <tbody id="monthDayTableBody">
                                <tr>
                                  <td class="mtdLabel">First</td><td class="mdtd">Sun</td><td class="mdtd">Mon</td><td class="mdtd">Tue</td><td class="mdtd">Wed</td><td class="mdtd">Thu</td><td class="mdtd">Fri</td><td class="mdtd">Sat</td>
                                  </tr>
                                <tr>
                                  <td class="mtdLabel">Second</td><td class="mdtd">Sun</td><td class="mdtd">Mon</td><td class="mdtd">Tue</td><td class="mdtd">Wed</td><td class="mdtd">Thu</td><td class="mdtd">Fri</td><td class="mdtd">Sat</td>
                                </tr>
                                <tr>
                                  <td class="mtdLabel">Third</td><td class="mdtd">Sun</td><td class="mdtd">Mon</td><td class="mdtd">Tue</td><td class="mdtd">Wed</td><td class="mdtd">Thu</td><td class="mdtd">Fri</td><td class="mdtd">Sat</td>
                                </tr>
                                <tr>
                                  <td class="mtdLabel">Fourth</td><td class="mdtd">Sun</td><td class="mdtd">Mon</td><td class="mdtd">Tue</td><td class="mdtd">Wed</td><td class="mdtd">Thu</td><td class="mdtd">Fri</td><td class="mdtd">Sat</td>
                                </tr>
                                <tr>
                                  <td class="mtdLabel">Last</td><td class="mdtd">Sun</td><td class="mdtd">Mon</td><td class="mdtd">Tue</td><td class="mdtd">Wed</td><td class="mdtd">Thu</td><td class="mdtd">Fri</td><td class="mdtd">Sat</td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </td>
              </tr>                          
            </tbody>
          </table>        
        </td>      
      </tr>
    </tbody>
  </table>
</div>


<iron-ajax id="eventajax" url="" handle-as="json" on-response="hresponse" debounce-duration="300">
</iron-ajax>
  
</template>

<script>
  var _this = null;  
  jQuery.fn.editable.defaults.mode = 'inline';
  
  Polymer(
  {
      is : 'friday-event-dialog',
      behaviors : [ Polymer.IronResizableBehavior ],
      getEvent : function()
      {                  
          this.$.eventajax.url = getBaseLocation();          
          
          this.$.eventajax.generateRequest();
      },
      hresponse : function(request)
      {
          eventResponse = this.$.newsajax.lastResponse;
          
          //alert(news);
          
          this.fire('event-changed',
          {
              eventChanged : true
          });
      },
      attached : function()
      {
          _this = this;
          
          this.async(this.notifyResize, 1);
      },
      ready: function()
      {
      },
      listeners :
      {
          'iron-resize'	 : '_onIronResize',
          'event-changed' : '_onEventChange'
      },
      properties :
      {
      },
      _onIronResize : function()
      {
          var infoCard = jQuery("#infoCard");
          var cardHeight = infoCard.height();
          var cardWidth = infoCard.width();

      },
      _onEventChange : function()
      {
          // after everything is received, parsed, and UI built,
          // new requests to get event data can be accepted
          gettingEvent = false;          
      },
      
      showEventDialog : function(startDate, endDate, allDay)
      {
          jQuery("#startDateAnchor").html(startDate.format("MMM-D-YYYY h:mmA"));
          jQuery("#endDateAnchor").html(endDate.format("MMM-D-YYYY h:mmA"));
          
          jQuery("#startDateAnchor").editable();
          jQuery("#endDateAnchor").editable();
          
          var eventDuration = moment.duration(endDate.diff(startDate));
          
          var durationMinutes = eventDuration.asMinutes();
          var durationString = "";
          
          if (durationMinutes > 119)
          {
              durationString = eventDuration.format("h [hours] m [minutes]");
          }
          else
          {
              durationString = eventDuration.format("h [hour] m [minutes]");
          }
          
          
          jQuery("#taskDayCountInput").spinner({
              min: 1,
              max: 999
          });
          
          jQuery("#oneTimeDateTimeSpan").html("on "
                  + startDate.format("MMM-D-YYYY")
                  + " from "
                  + startDate.format("h:mmA")
                  + " to "
                  + endDate.format("h:mmA")
                  + " (" + durationString + ")");
          
          jQuery("#eventDialogContainer").dialog(
          {
              title : "Create/Edit Event",
              height : 800,
              width : 800,
              autoOpen : true,
              modal : true,
              resizable : false,
              draggable : true,
              buttons: [
                        {
                          text: "Submit",
                          click: function()
                          {
                            jQuery( this ).dialog( "close" );
                          }
                        },
                        {
                          text: "Cancel",
                          click: function()
                          {
                            jQuery( this ).dialog( "close" );
                          }
                        }                      
                       ]        
          });
      },
      timezone: false,
      updateEventDisplay : function()
      {        
      }      
  });
 

</script>
        
</dom-module>